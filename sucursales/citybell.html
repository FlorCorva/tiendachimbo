<!DOCTYPE html>
<html lang="es">
<head>
  <link rel="icon" type="image/png" href="../img/favicon.png" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>City Bell - Carta</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <style>
    .menu-selector {
      text-align: center;
      margin: 1rem 0;
    }
    .menu-item {
      border: 1px solid #ddd;
      border-radius: 8px;
      padding: 1rem;
      margin-bottom: 1rem;
      text-align: center;
    }
    .menu-item img {
      max-width: 200px;
      border-radius: 8px;
    }
    .menu-item .desc {
      font-size: 0.9rem;
      color: #555;
    }
  </style>
</head>
<body>
  <h1>City Bell</h1>
  <div class="hero-banner">¡15% OFF en pedidos por WhatsApp!</div>
  <p>Elegí tus platos favoritos y finalizá tu pedido fácilmente.</p>

  <div class="menu-selector">
    <label for="categoria">Categoría:</label>
    <select id="categoria" onchange="cargarSubgrupos()">
      <option value="">Seleccioná...</option>
      <option value="comida">Comida</option>
      <option value="bebidas">Bebidas</option>
      <option value="pisco">Pisco</option>
    </select>

    <select id="subgrupo" onchange="mostrarProductos()" style="display: none;">
      <option value="">Seleccioná subgrupo...</option>
    </select>
  </div>

  <div class="menu" id="menu">
    <!-- Se cargan los productos dinámicamente -->
  </div>

  <div class="carrito">
    <h2>Tu pedido</h2>
    <ul id="carrito-lista"></ul>
    <p>Total: $<span id="total-carrito">0</span></p>
    <div class="boton-finalizar">
      <button type="button" id="finalizar-btn">Finalizar pedido</button>
    </div>
  </div>

  <script src="../js/main.js"></script>
  <script>
    const productos = {
      comida: {
        "Ceviches": [
          { nombre: "Ceviche clásico", precio: 3500, img: "../img/ceviche.jpg", descripcion: "Pesca fresca en leche de tigre, camote glaseado y cancha peruana." }
        ],
        "Platos Calientes": [
          { nombre: "Lomo saltado", precio: 4200, img: "../img/lomo_saltado.jpg", descripcion: "Salteado de lomo con cebolla, tomate y papas fritas." },
          { nombre: "Ají de gallina", precio: 3900, img: "../img/aji_de_gallina.jpeg", descripcion: "Crema de ají amarillo con pollo desmenuzado y arroz blanco." }
        ]
      },
      bebidas: {
        "Gaseosas": [
          { nombre: "Inca Kola", precio: 1000, img: "../img/incakola.jpg", descripcion: "Gaseosa peruana original." }
        ]
      },
      pisco: {
        "Cócteles": [
          { nombre: "Pisco Sour", precio: 2600, img: "../img/pisco_sour.jpg", descripcion: "Pisco Sour clásico peruano." }
        ]
      }
    };

    function cargarSubgrupos() {
      const cat = document.getElementById("categoria").value;
      const sub = document.getElementById("subgrupo");
      sub.innerHTML = '<option value="">Seleccioná subgrupo...</option>';

      if (cat && productos[cat]) {
        Object.keys(productos[cat]).forEach(sg => {
          const o = document.createElement("option");
          o.value = sg;
          o.textContent = sg;
          sub.appendChild(o);
        });
        sub.style.display = "inline-block";
      } else {
        sub.style.display = "none";
      }

      document.getElementById("menu").innerHTML = "";
    }

    function mostrarProductos() {
      const cat = document.getElementById("categoria").value;
      const sub = document.getElementById("subgrupo").value;
      const menuDiv = document.getElementById("menu");
      menuDiv.innerHTML = "";

      if (cat && sub && productos[cat][sub]) {
        productos[cat][sub].forEach(p => {
          const item = document.createElement("div");
          item.className = "menu-item";
          item.innerHTML = `
            <img src="${p.img}" alt="${p.nombre}" />
            <p>${p.nombre}</p>
            <div class="desc">${p.descripcion}</div>
            <span>$${p.precio}</span>
            <button type="button" onclick="agregarAlCarrito('${p.nombre}', ${p.precio})">Agregar</button>
          `;
          menuDiv.appendChild(item);
        });
      }
    }

    document.getElementById("finalizar-btn").addEventListener("click", function () {
      finalizarPedido("City Bell");
    });
  </script>
</body>
</html>
